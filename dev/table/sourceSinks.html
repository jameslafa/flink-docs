<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.4-SNAPSHOT Documentation: Table Sources & Sinks</title>
    <link rel="shortcut icon" href="//ci.apache.org/projects/flink/flink-docs-release-1.4/page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="//ci.apache.org/projects/flink/flink-docs-release-1.4/page/favicon.ico" type="image/x-icon">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.4/page/css/flink.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.4/page/css/syntax.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.4/page/css/codetabs.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.4/page/font-awesome/css/font-awesome.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    

    <!-- Main content. -->
    <div class="container">
      
      <div class="row">
        <div class="col-lg-3" id="sidenavcol">
          







  
    
    
    
      
    
  

  
    
    
    
      
    
  

  
    
    
    
      









  





<div class="sidenav-logo">
  <p><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4"><img class="bottom" alt="Apache Flink" src="//ci.apache.org/projects/flink/flink-docs-release-1.4/page/img/navbar-brand-logo.jpg"></a> v1.4-SNAPSHOT</p>
</div>
<ul id="sidenav">

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/index.html"><i class="fa fa-home title" aria-hidden="true"></i> Home</a></li>
    
  

  
    

    
      
    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-2" data-toggle="collapse"><i class="fa fa-map-o title appetizer" aria-hidden="true"></i> Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-2"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/concepts/programming-model.html">Programming Model</a></li>
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/concepts/runtime.html">Distributed Runtime</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/quickstart/setup_quickstart.html"><i class="fa fa-power-off title appetizer" aria-hidden="true"></i> Quickstart</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-7" data-toggle="collapse"><i class="fa fa-file-code-o title appetizer" aria-hidden="true"></i> Examples <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-7"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/examples/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/quickstart/run_example_quickstart.html">Monitoring Wikipedia Edits</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/examples.html">Batch Examples</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-11" data-toggle="collapse"><i class="fa fa-book title appetizer" aria-hidden="true"></i> Cookbook <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-11"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/cookbook/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/cookbook/stream-enrichment-join.html">Stream Enrichment Join</a></li>
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/cookbook/pattern-detection.html">Pattern Detection with CEP</a></li>
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-15" data-toggle="collapse"><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Project Setup <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-15"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/quickstart/java_api_quickstart.html">Sample Project in Java</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/quickstart/scala_api_quickstart.html">Sample Project in Scala</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/linking_with_flink.html">Linking with Flink</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/internals/ide_setup.html">IDE Setup</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/scala_shell.html">Scala REPL</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/linking.html">Linking with Optional Modules</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/start/flink_on_windows.html">Running Flink on Windows</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/start/building.html">Building Flink from Source</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-25" data-toggle="collapse" class="active"><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development</a><div class="collapse in" id="collapse-25"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-26" data-toggle="collapse">Basic API Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-26"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/api_concepts.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/scala_api_extensions.html">Scala API Extensions</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/java8.html">Java 8</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-30" data-toggle="collapse">Streaming (DataStream API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-30"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/datastream_api.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-31" data-toggle="collapse">Event Time <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-31"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/event_time.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/event_timestamps_watermarks.html">Generating Timestamps / Watermarks</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/event_timestamp_extractors.html">Pre-defined Timestamp Extractors / Watermark Emitters</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-35" data-toggle="collapse">State & Fault Tolerance <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-35"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/state/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/state/state.html">Working with State</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/state/checkpointing.html">Checkpointing</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/state/queryable_state.html">Queryable State</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/state/state_backends.html">State Backends</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/state/custom_serialization.html">Custom Serialization</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-42" data-toggle="collapse">Operators <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-42"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/operators/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/operators/windows.html">Windows</a></li>
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/operators/process_function.html">Process Function</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/operators/asyncio.html">Async I/O</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-47" data-toggle="collapse">Connectors <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-47"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/guarantees.html">Fault Tolerance Guarantees</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/kafka.html">Kafka</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/cassandra.html">Cassandra</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/kinesis.html">Kinesis</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/elasticsearch.html">Elasticsearch</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/filesystem_sink.html">Rolling File Sink</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/rabbitmq.html">RabbitMQ</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/nifi.html">NiFi</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/connectors/twitter.html">Twitter</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/side_output.html">Side Outputs</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/stream/testing.html">Testing</a></li>
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-61" data-toggle="collapse">Batch (DataSet API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-61"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/dataset_transformations.html">Transformations</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/iterations.html">Iterations</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/zip_elements_guide.html">Zipping Elements</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/fault_tolerance.html">Fault Tolerance</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/python.html">Python API</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/connectors.html">Connectors</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/batch/hadoop_compatibility.html">Hadoop Compatibility</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/local_execution.html">Local Execution</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/cluster_execution.html">Cluster Execution</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-72" data-toggle="collapse" class="active">Table API & SQL</a><div class="collapse in" id="collapse-72"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/common.html">Concepts & Common API</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/streaming.html">Streaming Concepts</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/tableApi.html">Table API</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/sql.html">SQL</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/sourceSinks.html" class="active">Table Sources & Sinks</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/udfs.html">User-defined Functions</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-80" data-toggle="collapse">Data Types & Serialization <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-80"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/types_serialization.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/custom_serializers.html">Custom Serializers</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-83" data-toggle="collapse">Managing Execution <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-83"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/execution_configuration.html">Execution Configuration</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/packaging.html">Program Packaging</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/parallel.html">Parallel Execution</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/execution_plans.html">Execution Plans</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/restart_strategies.html">Restart Strategies</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-90" data-toggle="collapse">Libraries <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-90"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/cep.html">Event Processing (CEP)</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/storm_compatibility.html">Storm Compatibility</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-93" data-toggle="collapse">Graphs: Gelly <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-93"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/gelly/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/gelly/graph_api.html">Graph API</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/gelly/iterative_graph_processing.html">Iterative Graph Processing</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/gelly/library_methods.html">Library Methods</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/gelly/graph_algorithms.html">Graph Algorithms</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/gelly/graph_generators.html">Graph Generators</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/gelly/bipartite_graph.html">Bipartite Graph</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-101" data-toggle="collapse">Machine Learning <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-101"><ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/index.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/quickstart.html">Quickstart</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/multiple_linear_regression.html">Multiple Linear Regression</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/cross_validation.html">Cross Validation</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/distance_metrics.html">Distance Metrics</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/knn.html">k-Nearest Neighbors Join</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/min_max_scaler.html">MinMax Scaler</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/contribution_guide.html">How to Contribute</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/pipelines.html">Pipelines</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/polynomial_features.html">Polynomial Features</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/als.html">ALS</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/sos.html">Stochastic Outlier Selection</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/standard_scaler.html">Standard Scaler</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/libs/ml/svm.html">SVM using CoCoA</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/best_practices.html">Best Practices</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/migration.html">API Migration Guides</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-120" data-toggle="collapse"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment & Operations <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-120"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-121" data-toggle="collapse">Clusters & Deployment <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-121"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/cluster_setup.html">Standalone Cluster</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/yarn_setup.html">YARN</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/mesos.html">Mesos</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/docker.html">Docker</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/kubernetes.html">Kubernetes</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/aws.html">AWS</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/gce_setup.html">Google Compute Engine</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/mapr_setup.html">MapR</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/jobmanager_high_availability.html">High Availability (HA)</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-132" data-toggle="collapse">State & Fault Tolerance <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-132"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/state/checkpoints.html">Checkpoints</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/state/savepoints.html">Savepoints</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/state/state_backends.html">State Backends</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/state/large_state_tuning.html">Tuning Checkpoints and Large State</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/config.html">Configuration</a></li>
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/production_ready.html">Production Readiness Checklist</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/cli.html">CLI</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/security-kerberos.html">Kerberos</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/security-ssl.html">SSL Setup</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/ops/upgrading.html">Upgrading Applications and Flink Versions</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-145" data-toggle="collapse"><i class="fa fa-bug title maindish" aria-hidden="true"></i> Debugging & Monitoring <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-145"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/metrics.html">Metrics</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/logging.html">Logging</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/historyserver.html">History Server</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/checkpoint_monitoring.html">Monitoring Checkpointing</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/back_pressure.html">Monitoring Back Pressure</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/rest_api.html">Monitoring REST API</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/debugging_event_time.html">Debugging Windows & Event Time</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/debugging_classloading.html">Debugging Classloading</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/monitoring/application_profiling.html">Application Profiling</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    
      
    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-156" data-toggle="collapse"><i class="fa fa-book title dessert" aria-hidden="true"></i> Internals <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-156"><ul>
  
        
        
        

        
        
      
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/internals/components.html">Component Stack</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/internals/stream_checkpointing.html">Fault Tolerance for Data Streaming</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/internals/job_scheduling.html">Jobs and Scheduling</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/internals/task_lifecycle.html">Task Lifecycle</a></li>
    
  

  
    

    
      
    

    
    
    

    

    
    
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/internals/filesystems.html">File Systems</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
  <li class="divider"></li>
  <li><a href="https://ci.apache.org/projects/flink/flink-docs-release-1.4/api/java"><i class="fa fa-external-link title" aria-hidden="true"></i> Javadocs</a></li>
  <li><a href="http://flink.apache.org"><i class="fa fa-external-link title" aria-hidden="true"></i> Project Page</a></li>
</ul>

<div class="sidenav-search-box">
  <form class="navbar-form" role="search" action="//ci.apache.org/projects/flink/flink-docs-release-1.4/search-results.html">
    <div class="form-group">
      <input type="text" class="form-control" size="16px" name="q" placeholder="Search">
    </div>
    <button type="submit" class="btn btn-default">Go</button>
  </form>
</div>

<div class="sidenav-versions">
  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Pick Docs Version
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.3">v1.3</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.2">v1.2</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.1">v1.1</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.0">v1.0</a></li>
      
    </ul>
  </div>
</div>

        </div>
        <div class="col-lg-9 content" id="contentcol">
          

          





  
  
    
    
      
    
  

  
  
    
    
      
    
  

  
  
    
    
      



<ol class="breadcrumb">

  
  
    <li><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development</li>
  

  
  
    <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/index.html">Table API & SQL</a></li>
  

  
  
    <li class="active">Table Sources & Sinks</li>
  

</ol>

<h1>Table Sources & Sinks</h1>




<p>A <code>TableSource</code> provides access to data which is stored in external systems (database, key-value store, message queue) or files. After a <a href="common.html#register-a-tablesource">TableSource is registered in a TableEnvironment</a> it can accessed by <a href="tableApi.html">Table API</a> or <a href="sql.html">SQL</a> queries.</p>

<p>A TableSink <a href="common.html#emit-a-table">emits a Table</a> to an external storage system, such as a database, key-value store, message queue, or file system (in different encodings, e.g., CSV, Parquet, or ORC).</p>

<p>Have a look at the <a href="common.html">common concepts and API</a> page for details how to <a href="common.html#register-a-tablesource">register a TableSource</a> and how to <a href="common.html#emit-a-table">emit a Table through a TableSink</a>.</p>

<ul id="markdown-toc">
  <li><a href="#provided-tablesources" id="markdown-toc-provided-tablesources">Provided TableSources</a>    <ul>
      <li><a href="#kafkajsontablesource" id="markdown-toc-kafkajsontablesource">KafkaJsonTableSource</a></li>
      <li><a href="#kafkaavrotablesource" id="markdown-toc-kafkaavrotablesource">KafkaAvroTableSource</a></li>
      <li><a href="#csvtablesource" id="markdown-toc-csvtablesource">CsvTableSource</a></li>
    </ul>
  </li>
  <li><a href="#provided-tablesinks" id="markdown-toc-provided-tablesinks">Provided TableSinks</a>    <ul>
      <li><a href="#csvtablesink" id="markdown-toc-csvtablesink">CsvTableSink</a></li>
      <li><a href="#jdbcappendtablesink" id="markdown-toc-jdbcappendtablesink">JDBCAppendTableSink</a></li>
    </ul>
  </li>
  <li><a href="#define-a-tablesource" id="markdown-toc-define-a-tablesource">Define a TableSource</a>    <ul>
      <li><a href="#batchtablesource" id="markdown-toc-batchtablesource">BatchTableSource</a></li>
      <li><a href="#streamtablesource" id="markdown-toc-streamtablesource">StreamTableSource</a></li>
      <li><a href="#projectabletablesource" id="markdown-toc-projectabletablesource">ProjectableTableSource</a></li>
      <li><a href="#nestedfieldsprojectabletablesource" id="markdown-toc-nestedfieldsprojectabletablesource">NestedFieldsProjectableTableSource</a></li>
      <li><a href="#filterabletablesource" id="markdown-toc-filterabletablesource">FilterableTableSource</a></li>
    </ul>
  </li>
  <li><a href="#define-a-tablesink" id="markdown-toc-define-a-tablesink">Define a TableSink</a>    <ul>
      <li><a href="#batchtablesink" id="markdown-toc-batchtablesink">BatchTableSink</a></li>
      <li><a href="#appendstreamtablesink" id="markdown-toc-appendstreamtablesink">AppendStreamTableSink</a></li>
      <li><a href="#retractstreamtablesink" id="markdown-toc-retractstreamtablesink">RetractStreamTableSink</a></li>
      <li><a href="#upsertstreamtablesink" id="markdown-toc-upsertstreamtablesink">UpsertStreamTableSink</a></li>
    </ul>
  </li>
</ul>

<h2 id="provided-tablesources">Provided TableSources</h2>

<p>Currently, Flink provides the <code>CsvTableSource</code> to read CSV files and a few table sources to read JSON or Avro data from Kafka.
A custom <code>TableSource</code> can be defined by implementing the <code>BatchTableSource</code> or <code>StreamTableSource</code> interface. See section on <a href="#define-a-tablesource">defining a custom TableSource</a> for details.</p>

<table>
  <tbody>
    <tr>
      <td><strong>Class name</strong></td>
      <td><strong>Maven dependency</strong></td>
      <td><strong>Batch?</strong></td>
      <td><strong>Streaming?</strong></td>
      <td><strong>Description</strong></td>
    </tr>
    <tr>
      <td><code>CsvTableSource</code></td>
      <td><code>flink-table</code></td>
      <td>Y</td>
      <td>Y</td>
      <td>A simple source for CSV files.</td>
    </tr>
    <tr>
      <td><code>Kafka08JsonTableSource</code></td>
      <td><code>flink-connector-kafka-0.8</code></td>
      <td>N</td>
      <td>Y</td>
      <td>A Kafka 0.8 source for JSON data.</td>
    </tr>
    <tr>
      <td><code>Kafka08AvroTableSource</code></td>
      <td><code>flink-connector-kafka-0.8</code></td>
      <td>N</td>
      <td>Y</td>
      <td>A Kafka 0.8 source for Avro data.</td>
    </tr>
    <tr>
      <td><code>Kafka09JsonTableSource</code></td>
      <td><code>flink-connector-kafka-0.9</code></td>
      <td>N</td>
      <td>Y</td>
      <td>A Kafka 0.9 source for JSON data.</td>
    </tr>
    <tr>
      <td><code>Kafka09AvroTableSource</code></td>
      <td><code>flink-connector-kafka-0.9</code></td>
      <td>N</td>
      <td>Y</td>
      <td>A Kafka 0.9 source for Avro data.</td>
    </tr>
    <tr>
      <td><code>Kafka010JsonTableSource</code></td>
      <td><code>flink-connector-kafka-0.10</code></td>
      <td>N</td>
      <td>Y</td>
      <td>A Kafka 0.10 source for JSON data.</td>
    </tr>
    <tr>
      <td><code>Kafka010AvroTableSource</code></td>
      <td><code>flink-connector-kafka-0.10</code></td>
      <td>N</td>
      <td>Y</td>
      <td>A Kafka 0.10 source for Avro data.</td>
    </tr>
  </tbody>
</table>

<p>All sources that come with the <code>flink-table</code> dependency can be directly used by your Table programs. For all other table sources, you have to add the respective dependency in addition to the <code>flink-table</code> dependency.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="kafkajsontablesource">KafkaJsonTableSource</h3>

<p>To use the Kafka JSON source, you have to add the Kafka connector dependency to your project:</p>

<ul>
  <li><code>flink-connector-kafka-0.8</code> for Kafka 0.8,</li>
  <li><code>flink-connector-kafka-0.9</code> for Kafka 0.9, or</li>
  <li><code>flink-connector-kafka-0.10</code> for Kafka 0.10, respectively.</li>
</ul>

<p>You can then create the source as follows (example for Kafka 0.8):</p>
<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// specify JSON field names and types</span>
<span class="n">TypeInformation</span><span class="o">&lt;</span><span class="n">Row</span><span class="o">&gt;</span> <span class="n">typeInfo</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="na">ROW</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;score&quot;</span> <span class="o">},</span>
  <span class="k">new</span> <span class="n">TypeInformation</span><span class="o">&lt;?&gt;[]</span> <span class="o">{</span> <span class="n">Types</span><span class="o">.</span><span class="na">INT</span><span class="o">(),</span> <span class="n">Types</span><span class="o">.</span><span class="na">STRING</span><span class="o">(),</span> <span class="n">Types</span><span class="o">.</span><span class="na">DOUBLE</span><span class="o">()</span> <span class="o">}</span>
<span class="o">);</span>

<span class="n">KafkaJsonTableSource</span> <span class="n">kafkaTableSource</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Kafka08JsonTableSource</span><span class="o">(</span>
    <span class="n">kafkaTopic</span><span class="o">,</span>
    <span class="n">kafkaProperties</span><span class="o">,</span>
    <span class="n">typeInfo</span><span class="o">);</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="c1">// specify JSON field names and types</span>
<span class="k">val</span> <span class="n">typeInfo</span> <span class="k">=</span> <span class="nc">Types</span><span class="o">.</span><span class="nc">ROW</span><span class="o">(</span>
  <span class="nc">Array</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;score&quot;</span><span class="o">),</span>
  <span class="nc">Array</span><span class="o">(</span><span class="nc">Types</span><span class="o">.</span><span class="nc">INT</span><span class="o">,</span> <span class="nc">Types</span><span class="o">.</span><span class="nc">STRING</span><span class="o">,</span> <span class="nc">Types</span><span class="o">.</span><span class="nc">DOUBLE</span><span class="o">)</span>
<span class="o">)</span>

<span class="k">val</span> <span class="n">kafkaTableSource</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Kafka08JsonTableSource</span><span class="o">(</span>
    <span class="n">kafkaTopic</span><span class="o">,</span>
    <span class="n">kafkaProperties</span><span class="o">,</span>
    <span class="n">typeInfo</span><span class="o">)</span></code></pre></div>

  </div>
</div>

<p>By default, a missing JSON field does not fail the source. You can configure this via:</p>

<div class="highlight"><pre><code class="language-java"><span class="c1">// Fail on missing JSON field</span>
<span class="n">tableSource</span><span class="o">.</span><span class="na">setFailOnMissingField</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span></code></pre></div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="kafkaavrotablesource">KafkaAvroTableSource</h3>

<p>The <code>KafkaAvroTableSource</code> allows you to read Avroâ€™s <code>SpecificRecord</code> objects from Kafka.</p>

<p>To use the Kafka Avro source, you have to add the Kafka connector dependency to your project:</p>

<ul>
  <li><code>flink-connector-kafka-0.8</code> for Kafka 0.8,</li>
  <li><code>flink-connector-kafka-0.9</code> for Kafka 0.9, or</li>
  <li><code>flink-connector-kafka-0.10</code> for Kafka 0.10, respectively.</li>
</ul>

<p>You can then create the source as follows (example for Kafka 0.8):</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// pass the generated Avro class to the TableSource</span>
<span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">SpecificRecord</span><span class="o">&gt;</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">MyAvroType</span><span class="o">.</span><span class="na">class</span><span class="o">;</span> 

<span class="n">KafkaAvroTableSource</span> <span class="n">kafkaTableSource</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Kafka08AvroTableSource</span><span class="o">(</span>
    <span class="n">kafkaTopic</span><span class="o">,</span>
    <span class="n">kafkaProperties</span><span class="o">,</span>
    <span class="n">clazz</span><span class="o">);</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="c1">// pass the generated Avro class to the TableSource</span>
<span class="k">val</span> <span class="n">clazz</span> <span class="k">=</span> <span class="n">classOf</span><span class="o">[</span><span class="kt">MyAvroType</span><span class="o">]</span>

<span class="k">val</span> <span class="n">kafkaTableSource</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Kafka08AvroTableSource</span><span class="o">(</span>
    <span class="n">kafkaTopic</span><span class="o">,</span>
    <span class="n">kafkaProperties</span><span class="o">,</span>
    <span class="n">clazz</span><span class="o">)</span></code></pre></div>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="csvtablesource">CsvTableSource</h3>

<p>The <code>CsvTableSource</code> is already included in <code>flink-table</code> without additional dependecies.</p>

<p>The easiest way to create a <code>CsvTableSource</code> is by using the enclosed builder <code>CsvTableSource.builder()</code>, the builder has the following methods to configure properties:</p>

<ul>
  <li><code>path(String path)</code> Sets the path to the CSV file, required.</li>
  <li><code>field(String fieldName, TypeInformation&lt;?&gt; fieldType)</code> Adds a field with the field name and field type information, can be called multiple times, required. The call order of this method defines also the order of the fields in a row.</li>
  <li><code>fieldDelimiter(String delim)</code> Sets the field delimiter, <code>","</code> by default.</li>
  <li><code>lineDelimiter(String delim)</code> Sets the line delimiter, <code>"\n"</code> by default.</li>
  <li><code>quoteCharacter(Character quote)</code> Sets the quote character for String values, <code>null</code> by default.</li>
  <li><code>commentPrefix(String prefix)</code> Sets a prefix to indicate comments, <code>null</code> by default.</li>
  <li><code>ignoreFirstLine()</code> Ignore the first line. Disabled by default.</li>
  <li><code>ignoreParseErrors()</code> Skip records with parse error instead to fail. Throwing an exception by default.</li>
</ul>

<p>You can create the source as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">CsvTableSource</span> <span class="n">csvTableSource</span> <span class="o">=</span> <span class="n">CsvTableSource</span>
    <span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/path/to/your/file.csv&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="n">Types</span><span class="o">.</span><span class="na">STRING</span><span class="o">())</span>
    <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="n">Types</span><span class="o">.</span><span class="na">INT</span><span class="o">())</span>
    <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;score&quot;</span><span class="o">,</span> <span class="n">Types</span><span class="o">.</span><span class="na">DOUBLE</span><span class="o">())</span>
    <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;comments&quot;</span><span class="o">,</span> <span class="n">Types</span><span class="o">.</span><span class="na">STRING</span><span class="o">())</span>
    <span class="o">.</span><span class="na">fieldDelimiter</span><span class="o">(</span><span class="s">&quot;#&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">lineDelimiter</span><span class="o">(</span><span class="s">&quot;$&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">ignoreFirstLine</span><span class="o">()</span>
    <span class="o">.</span><span class="na">ignoreParseErrors</span><span class="o">()</span>
    <span class="o">.</span><span class="na">commentPrefix</span><span class="o">(</span><span class="s">&quot;%&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">csvTableSource</span> <span class="k">=</span> <span class="nc">CsvTableSource</span>
    <span class="o">.</span><span class="n">builder</span>
    <span class="o">.</span><span class="n">path</span><span class="o">(</span><span class="s">&quot;/path/to/your/file.csv&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="n">field</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="nc">Types</span><span class="o">.</span><span class="nc">STRING</span><span class="o">)</span>
    <span class="o">.</span><span class="n">field</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="nc">Types</span><span class="o">.</span><span class="nc">INT</span><span class="o">)</span>
    <span class="o">.</span><span class="n">field</span><span class="o">(</span><span class="s">&quot;score&quot;</span><span class="o">,</span> <span class="nc">Types</span><span class="o">.</span><span class="nc">DOUBLE</span><span class="o">)</span>
    <span class="o">.</span><span class="n">field</span><span class="o">(</span><span class="s">&quot;comments&quot;</span><span class="o">,</span> <span class="nc">Types</span><span class="o">.</span><span class="nc">STRING</span><span class="o">)</span>
    <span class="o">.</span><span class="n">fieldDelimiter</span><span class="o">(</span><span class="s">&quot;#&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="n">lineDelimiter</span><span class="o">(</span><span class="s">&quot;$&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="n">ignoreFirstLine</span>
    <span class="o">.</span><span class="n">ignoreParseErrors</span>
    <span class="o">.</span><span class="n">commentPrefix</span><span class="o">(</span><span class="s">&quot;%&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="n">build</span></code></pre></div>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="provided-tablesinks">Provided TableSinks</h2>

<p>The following table lists the <code>TableSink</code>s which are provided with Flink.</p>

<table>
  <tbody>
    <tr>
      <td><strong>Class name</strong></td>
      <td><strong>Maven dependency</strong></td>
      <td><strong>Batch?</strong></td>
      <td><strong>Streaming?</strong></td>
      <td><strong>Description</strong></td>
    </tr>
    <tr>
      <td><code>CsvTableSink</code></td>
      <td><code>flink-table</code></td>
      <td>Y</td>
      <td>Append</td>
      <td>A simple sink for CSV files.</td>
    </tr>
    <tr>
      <td><code>JDBCAppendTableSink</code></td>
      <td><code>flink-jdbc</code></td>
      <td>Y</td>
      <td>Append</td>
      <td>Writes tables to a JDBC database.</td>
    </tr>
    <tr>
      <td><code>Kafka08JsonTableSink</code></td>
      <td><code>flink-connector-kafka-0.8</code></td>
      <td>N</td>
      <td>Append</td>
      <td>A Kafka 0.8 sink with JSON encoding.</td>
    </tr>
    <tr>
      <td><code>Kafka09JsonTableSink</code></td>
      <td><code>flink-connector-kafka-0.9</code></td>
      <td>N</td>
      <td>Append</td>
      <td>A Kafka 0.9 sink with JSON encoding.</td>
    </tr>
  </tbody>
</table>

<p>All sinks that come with the <code>flink-table</code> dependency can be directly used by your Table programs. For all other table sinks, you have to add the respective dependency in addition to the <code>flink-table</code> dependency.</p>

<p>A custom <code>TableSink</code> can be defined by implementing the <code>BatchTableSink</code>, <code>AppendStreamTableSink</code>, <code>RetractStreamTableSink</code>, or <code>UpsertStreamTableSink</code> interface. See section on <a href="#define-a-tablesink">defining a custom TableSink</a> for details.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="csvtablesink">CsvTableSink</h3>

<p>The <code>CsvTableSink</code> emits a <code>Table</code> to one or more CSV files.</p>

<p>The sink only supports append-only streaming tables. It cannot be used to emit a <code>Table</code> that is continuously updated. See the <a href="./streaming.html#table-to-stream-conversion">documentation on Table to Stream conversions</a> for details. When emitting a streaming table, rows are written at least once (if checkpointing is enabled) and the <code>CsvTableSink</code> does not split output files into bucket files but continuously writes to the same files.</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Table</span> <span class="n">table</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">table</span><span class="o">.</span><span class="na">writeToSink</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">CsvTableSink</span><span class="o">(</span>
    <span class="n">path</span><span class="o">,</span>                  <span class="c1">// output path </span>
    <span class="s">&quot;|&quot;</span><span class="o">,</span>                   <span class="c1">// optional: delimit files by &#39;|&#39;</span>
    <span class="mi">1</span><span class="o">,</span>                     <span class="c1">// optional: write to a single file</span>
    <span class="n">WriteMode</span><span class="o">.</span><span class="na">OVERWRITE</span><span class="o">));</span> <span class="c1">// optional: override existing files</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">table</span><span class="k">:</span> <span class="kt">Table</span> <span class="o">=</span> <span class="o">???</span>

<span class="n">table</span><span class="o">.</span><span class="n">writeToSink</span><span class="o">(</span>
  <span class="k">new</span> <span class="nc">CsvTableSink</span><span class="o">(</span>
    <span class="n">path</span><span class="o">,</span>                             <span class="c1">// output path </span>
    <span class="n">fieldDelim</span> <span class="k">=</span> <span class="s">&quot;|&quot;</span><span class="o">,</span>                 <span class="c1">// optional: delimit files by &#39;|&#39;</span>
    <span class="n">numFiles</span> <span class="k">=</span> <span class="mi">1</span><span class="o">,</span>                     <span class="c1">// optional: write to a single file</span>
    <span class="n">writeMode</span> <span class="k">=</span> <span class="nc">WriteMode</span><span class="o">.</span><span class="nc">OVERWRITE</span><span class="o">))</span> <span class="c1">// optional: override existing files</span></code></pre></div>

  </div>
</div>

<h3 id="jdbcappendtablesink">JDBCAppendTableSink</h3>

<p>The <code>JDBCAppendTableSink</code> emits a <code>Table</code> to a JDBC connection. The sink only supports append-only streaming tables. It cannot be used to emit a <code>Table</code> that is continuously updated. See the <a href="./streaming.html#table-to-stream-conversion">documentation on Table to Stream conversions</a> for details.</p>

<p>The <code>JDBCAppendTableSink</code> inserts each <code>Table</code> row at least once into the database table (if checkpointing is enabled). However, you can specify the insertion query using <code>REPLACE</code> or <code>INSERT OVERWRITE</code> to perform upsert writes to the database.</p>

<p>To use the JDBC sink, you have to add the JDBC connector dependency (<code>flink-jdbc</code>) to your project. Then you can create the sink using <code>JDBCAppendSinkBuilder</code>:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">JDBCAppendTableSink</span> <span class="n">sink</span> <span class="o">=</span> <span class="n">JDBCAppendTableSink</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">setDrivername</span><span class="o">(</span><span class="s">&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setDBUrl</span><span class="o">(</span><span class="s">&quot;jdbc:derby:memory:ebookshop&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setQuery</span><span class="o">(</span><span class="s">&quot;INSERT INTO books (id) VALUES (?)&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setParameterTypes</span><span class="o">(</span><span class="n">INT_TYPE_INFO</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="n">Table</span> <span class="n">table</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">table</span><span class="o">.</span><span class="na">writeToSink</span><span class="o">(</span><span class="n">sink</span><span class="o">);</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">sink</span><span class="k">:</span> <span class="kt">JDBCAppendTableSink</span> <span class="o">=</span> <span class="nc">JDBCAppendTableSink</span><span class="o">.</span><span class="n">builder</span><span class="o">()</span>
  <span class="o">.</span><span class="n">setDrivername</span><span class="o">(</span><span class="s">&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="n">setDBUrl</span><span class="o">(</span><span class="s">&quot;jdbc:derby:memory:ebookshop&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="n">setQuery</span><span class="o">(</span><span class="s">&quot;INSERT INTO books (id) VALUES (?)&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="n">setParameterTypes</span><span class="o">(</span><span class="nc">INT_TYPE_INFO</span><span class="o">)</span>
  <span class="o">.</span><span class="n">build</span><span class="o">()</span>

<span class="k">val</span> <span class="n">table</span><span class="k">:</span> <span class="kt">Table</span> <span class="o">=</span> <span class="o">???</span>
<span class="n">table</span><span class="o">.</span><span class="n">writeToSink</span><span class="o">(</span><span class="n">sink</span><span class="o">)</span></code></pre></div>

  </div>
</div>

<p>Similar to using <code>JDBCOutputFormat</code>, you have to explicitly specify the name of the JDBC driver, the JDBC URL, the query to be executed, and the field types of the JDBC table.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="define-a-tablesource">Define a TableSource</h2>

<p>A <code>TableSource</code> is a generic interface to access to data stored in an external system as a table. It produces a <code>DataSet</code> or <code>DataStream</code> and provides the type information to derive the schema of the generated table. There are different table sources for batch tables and streaming tables.</p>

<p>Schema information consists of a data type, field names, and corresponding indexes of these names in the data type.</p>

<p>The general interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">TableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">TypeInformation</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">getReturnType</span><span class="o">();</span>

  <span class="kd">public</span> <span class="n">String</span> <span class="nf">explainSource</span><span class="o">();</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">TableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">getReturnType</span><span class="k">:</span> <span class="kt">TypeInformation</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">explainSource</span><span class="k">:</span> <span class="kt">String</span>

<span class="o">}</span></code></pre></div>

  </div>
</div>

<p>To define a <code>TableSource</code> one needs to implement <code>TableSource#getReturnType</code>. In this case field names and field indexes are derived from the returned type.</p>

<p>If the <code>TypeInformation</code> returned by <code>getReturnType</code> does not allow to specify custom field names, it is possible to implement the <code>DefinedFieldNames</code> interface in addition.</p>

<h3 id="batchtablesource">BatchTableSource</h3>

<p>Defines an external <code>TableSource</code> to create a batch table and provides access to its data.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">BatchTableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">TableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">DataSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">getDataSet</span><span class="o">(</span><span class="n">ExecutionEnvironment</span> <span class="n">execEnv</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">BatchTableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">TableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">getDataSet</span><span class="o">(</span><span class="n">execEnv</span><span class="k">:</span> <span class="kt">ExecutionEnvironment</span><span class="o">)</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="streamtablesource">StreamTableSource</h3>

<p>Defines an external <code>TableSource</code> to create a streaming table and provides access to its data.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">StreamTableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">TableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">DataSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">getDataStream</span><span class="o">(</span><span class="n">StreamExecutionEnvironment</span> <span class="n">execEnv</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">StreamTableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">TableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">getDataStream</span><span class="o">(</span><span class="n">execEnv</span><span class="k">:</span> <span class="kt">StreamExecutionEnvironment</span><span class="o">)</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p><strong>Note:</strong> If a Table needs to be processed in event-time, the <code>DataStream</code> returned by the <code>getDataStream()</code> method must carry timestamps and watermarks. Please see the documentation on <a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/event_timestamps_watermarks.html">timestamp and watermark assignment</a> for details on how to assign timestamps and watermarks.</p>

<p><strong>Note:</strong> Time-based operations on streaming tables such as windows in both the <a href="tableApi.html#group-windows">Table API</a> and <a href="sql.html#group-windows">SQL</a> require explicitly specified time attributes.</p>

<ul>
  <li><code>DefinedRowtimeAttribute</code> provides the <code>getRowtimeAttribute()</code> method to specify the name of the event-time time attribute.</li>
  <li><code>DefinedProctimeAttribute</code> provides the <code>getProctimeAttribute()</code> method to specify the name of the processing-time time attribute.</li>
</ul>

<p>Please see the documentation on <a href="//ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/streaming.html#time-attributes">time attributes</a> for details.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="projectabletablesource">ProjectableTableSource</h3>

<p>The <code>ProjectableTableSource</code> interface adds support for projection push-down to a <code>TableSource</code>. A <code>TableSource</code> extending this interface is able to project the fields of the return table.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">ProjectableTableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">TableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">projectFields</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">fields</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">ProjectableTableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="nc">TableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="n">projectFields</span><span class="o">(</span><span class="n">fields</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p>The <code>projectFields()</code> is called with an array that holds the indexes of the required fields. The method returns a new <code>TableSource</code> object that returns rows with the requested schema.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="nestedfieldsprojectabletablesource">NestedFieldsProjectableTableSource</h3>

<p>The <code>NestedFieldsProjectableTableSource</code> interface adds support for projection push-down to a <code>TableSource</code> with nested fields. A <code>TableSource</code> extending this interface is able to project the nested fields of the returned table.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">NestedFieldsProjectableTableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">TableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">projectNestedFields</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">fields</span><span class="o">,</span> <span class="n">String</span><span class="o">[][]</span> <span class="n">nestedFields</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">NestedFieldsProjectableTableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">projectNestedFields</span><span class="o">(</span><span class="n">fields</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">Int</span><span class="o">],</span> <span class="n">nestedFields</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]])</span><span class="k">:</span> <span class="kt">TableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<h3 id="filterabletablesource">FilterableTableSource</h3>

<p>The <code>FilterableTableSource</code> interface adds support for filtering push-down to a <code>TableSource</code>. A <code>TableSource</code> extending this interface is able to filter records before returning.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">FilterableTableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">TableSource</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">applyPredicate</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Expression</span><span class="o">&gt;</span> <span class="n">predicates</span><span class="o">);</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isFilterPushedDown</span><span class="o">();</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">FilterableTableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">applyPredicate</span><span class="o">(</span><span class="n">predicates</span><span class="k">:</span> <span class="kt">java.util.List</span><span class="o">[</span><span class="kt">Expression</span><span class="o">])</span><span class="k">:</span> <span class="kt">TableSource</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">isFilterPushedDown</span><span class="k">:</span> <span class="kt">Boolean</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p>The optimizer pushes predicates down by calling the <code>applyPredicate()</code> method. The <code>TableSource</code> can evaluate which predicates to evaluate by itself and which to leave for the framework. Predicates which are evaluated by the <code>TableSource</code> must be removed from the <code>List</code>. All predicates which remain in the <code>List</code> after the method call returns are evaluated by the framework. The <code>applyPredicate()</code> method returns a new <code>TableSource</code> that evaluates all selected predicates.</p>

<p>The <code>isFilterPushedDown()</code> method tells the optimizer whether predicates have been pushed down or not.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="define-a-tablesink">Define a TableSink</h2>

<p>A <code>TableSink</code> specifies how to emit a <code>Table</code> to an external system or location. The interface is generic such that it can support different storage locations and formats. There are different table sinks for batch tables and streaming tables.</p>

<p>The general interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">TableSink</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">TypeInformation</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">getOutputType</span><span class="o">();</span>

  <span class="kd">public</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">getFieldNames</span><span class="o">();</span>

  <span class="kd">public</span> <span class="n">TypeInformation</span><span class="o">[]</span> <span class="nf">getFieldTypes</span><span class="o">();</span>

  <span class="kd">public</span> <span class="n">TableSink</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">configure</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">fieldNames</span><span class="o">,</span> <span class="n">TypeInformation</span><span class="o">[]</span> <span class="n">fieldTypes</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">TableSink</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">getOutputType</span><span class="k">:</span> <span class="kt">TypeInformation&lt;T&gt;</span>

  <span class="k">def</span> <span class="n">getFieldNames</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">getFieldTypes</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">TypeInformation</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">configure</span><span class="o">(</span><span class="n">fieldNames</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">],</span> <span class="n">fieldTypes</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">TypeInformation</span><span class="o">])</span><span class="k">:</span> <span class="kt">TableSink</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p>The <code>TableSink#configure</code> method is called to pass the schema of the Table (field names and types) to emit to the <code>TableSink</code>. The method must return a new instance of the TableSink which is configured to emit the provided Table schema.</p>

<h3 id="batchtablesink">BatchTableSink</h3>

<p>Defines an external <code>TableSink</code> to emit a batch table.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">BatchTableSink</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">TableSink</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">emitDataSet</span><span class="o">(</span><span class="n">DataSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">dataSet</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">BatchTableSink</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">TableSink</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">emitDataSet</span><span class="o">(</span><span class="n">dataSet</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">T</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="appendstreamtablesink">AppendStreamTableSink</h3>

<p>Defines an external <code>TableSink</code> to emit a streaming table with only insert changes.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">AppendStreamTableSink</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">TableSink</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">emitDataStream</span><span class="o">(</span><span class="n">DataStream</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">dataStream</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">AppendStreamTableSink</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">TableSink</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">emitDataStream</span><span class="o">(</span><span class="n">dataStream</span><span class="k">:</span> <span class="kt">DataStream&lt;T&gt;</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p>If the table is also modified by update or delete changes, a <code>TableException</code> will be thrown.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="retractstreamtablesink">RetractStreamTableSink</h3>

<p>Defines an external <code>TableSink</code> to emit a streaming table with insert, update, and delete changes.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">RetractStreamTableSink</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">TableSink</span><span class="o">&lt;</span><span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="n">TypeInformation</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">getRecordType</span><span class="o">();</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">emitDataStream</span><span class="o">(</span><span class="n">DataStream</span><span class="o">&lt;</span><span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">dataStream</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">RetractStreamTableSink</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">TableSink</span><span class="o">[</span><span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Boolean</span>, <span class="kt">T</span><span class="o">]]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">getRecordType</span><span class="k">:</span> <span class="kt">TypeInformation</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">emitDataStream</span><span class="o">(</span><span class="n">dataStream</span><span class="k">:</span> <span class="kt">DataStream</span><span class="o">[</span><span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Boolean</span>, <span class="kt">T</span><span class="o">]])</span><span class="k">:</span> <span class="kt">Unit</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p>The table will be converted into a stream of accumulate and retraction messages which are encoded as Java <code>Tuple2</code>. The first field is a boolean flag to indicate the message type (<code>true</code> indicates insert, <code>false</code> indicates delete). The second field holds the record of the requested type <code>T</code>.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="upsertstreamtablesink">UpsertStreamTableSink</h3>

<p>Defines an external <code>TableSink</code> to emit a streaming table with insert, update, and delete changes.</p>

<p>The interface looks as follows:</p>

<div class="codetabs">
  <div data-lang="java">

    <div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">UpsertStreamTableSink</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">TableSink</span><span class="o">&lt;</span><span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setKeyFields</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">keys</span><span class="o">);</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIsAppendOnly</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">isAppendOnly</span><span class="o">);</span>

  <span class="kd">public</span> <span class="n">TypeInformation</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">getRecordType</span><span class="o">();</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">emitDataStream</span><span class="o">(</span><span class="n">DataStream</span><span class="o">&lt;</span><span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">dataStream</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

  </div>

  <div data-lang="scala">

    <div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nc">UpsertStreamTableSink</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">TableSink</span><span class="o">[</span><span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Boolean</span>, <span class="kt">T</span><span class="o">]]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">setKeyFields</span><span class="o">(</span><span class="n">keys</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span>

  <span class="k">def</span> <span class="n">setIsAppendOnly</span><span class="o">(</span><span class="n">isAppendOnly</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span>

  <span class="k">def</span> <span class="n">getRecordType</span><span class="k">:</span> <span class="kt">TypeInformation</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">emitDataStream</span><span class="o">(</span><span class="n">dataStream</span><span class="k">:</span> <span class="kt">DataStream</span><span class="o">[</span><span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Boolean</span>, <span class="kt">T</span><span class="o">]])</span><span class="k">:</span> <span class="kt">Unit</span>
<span class="o">}</span></code></pre></div>

  </div>
</div>

<p>The table must be have unique key fields (atomic or composite) or be append-only. If the table does not have a unique key and is not append-only, a <code>TableException</code> will be thrown. The unique key of the table is configured by the <code>UpsertStreamTableSink#setKeyFields()</code> method.</p>

<p>The table will be converted into a stream of upsert and delete messages which are encoded as a Java <code>Tuple2</code>. The first field is a boolean flag to indicate the message type. The second field holds the record of the requested type <code>T</code>.</p>

<p>A message with true boolean field is an upsert message for the configured key. A message with false flag is a delete message for the configured key. If the table is append-only, all messages will have a true flag and must be interpreted as insertions.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>



        </div>
      </div>
    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="//ci.apache.org/projects/flink/flink-docs-release-1.4/page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>
